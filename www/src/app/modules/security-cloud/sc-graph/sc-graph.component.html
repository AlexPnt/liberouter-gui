<div class="card">
    <h4 class="card-header card-primary card-inverse text-center">
        <!-- todo : thumbnails and varswap -->
        {{ getRRDConstant().name }} on {{ selectedProfile }}
    </h4>
    
    <div class="card-block">
        <!-- active graph area -->
        <sc-graph-render #RenderComponent
            [selectedProfile]="selectedProfile"
            [time]="time"
            (timeChange)="handleTimeChangePropagation($event)"
            (resolutionChange)="updateResolutionPtr($event)"
            [selectedVar]="selectedVar"
            [renderSettings]="renderSettings"
            [channels]="channels"
            [config]="config">
        </sc-graph-render>
    </div>
    
    <div class="card-footer">
        <div class="row mb-4 align-items-center">
            <!-- Render settings -->
            <div class="col-md-2 text-center">
                <div class="box">
                    <div class="form-check form-check-inline">
                        <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="renderSettings"
                                value="line" [(ngModel)]="renderSettings"> Line
                        </label>
                    </div>
                    <div class="form-check form-check-inline">
                        <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="renderSettings"
                                value="stacked" [(ngModel)]="renderSettings"> Stacked
                        </label>
                    </div>
                </div>
            </div>
        
            <div class="col-md-10">
                <div class="box">
                    <div class="form-check form-check-inline" *ngFor="let channel of channels;
                        let i=index">
                        <label class="form-check-label">
                            <input class="form-check-input" value="channel.name" type="checkbox"
                                [(ngModel)]="channel.checked"
                                (click)="renderComponent.changeChannelVisibility(i)">
                                <span [ngStyle]="{'background': channel.color}">
                                    &nbsp;&nbsp;
                                </span>
                                &nbsp;{{ channel.name }}
                        </label>
                    </div>
                </div>
            </div>
        </div>
    
		<div class="row align-items-center">
			<div class="col-md-2">
                <form class="form-inline">
					<div class="form-group">
						<div class="input-group">
							<input class="form-control" placeholder="yyyy-mm-dd" name="dp"
								[(ngModel)]="pickerDate" ngbDatepicker #d="ngbDatepicker"
								(ngModelChange)="pickerChanged($event)">
							<div class="input-group-addon cursor-pointer" (click)="d.toggle()">
								<i class="fa fa-calendar"></i>
							</div>
						</div>
					</div>
				</form>
            </div>

            <div class="col-md-2 text-center">
                <select class="form-control" [ngModel]="selectedResolution"
                    (ngModelChange)="renderComponent.changeResolution(true, $event)">
                    <option *ngFor="let x of resolutionTable; let i=index" [value]="i">
                        {{ x.label }}
                    </option>
                </select>
            </div>

            <div class="col-md-5">
                <!-- Selected time box -->
                <div class="box">
                    {{ time.sel.bgn | date : 'y-MM-dd HH:mm' }}
                    <span *ngIf="time.sel.bgn != time.sel.end">
                        - {{ time.sel.end | date : 'y-MM-dd HH:mm' }}
                    </span>
                </div>
            </div>
			
			<div class="col">
				<div class="btn-group btn-group-justified">
					<button class="btn btn-secondary" (click)="renderComponent.changeTimeWindow(0)">
						<i class="fa fa-backward"></i>
					</button>
					<button class="btn btn-secondary"
                        (click)="renderComponent.changeResolution(false, '1')">
						<i class="fa fa-search-minus"></i>
					</button>
					<button class="btn btn-secondary"
                        (click)="renderComponent.changeResolution(false, '-1')">
						<i class="fa fa-search-plus"></i>
					</button>
					<button class="btn btn-secondary" (click)="renderComponent.changeTimeWindow(1)">
						<i class="fa fa-forward"></i>
					</button>
					<button class="btn btn-secondary" (click)="renderComponent.changeTimeWindow(2)">
						<i class="fa fa-step-forward"></i>
					</button>
				</div>
			</div>
		</div>
	</div>
</div>